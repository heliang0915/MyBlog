(function(){var b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAABlBMVEXu7u7u7u4MXmA/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAFElEQVQ4jWNgGAWjYBSMglFATwAABXgAAfmlXscAAAAASUVORK5CYII=";function a(d,c){this.container=d;this.selector=c||"lazy";this.init()}a.proto=a.prototype;a.proto.init=function(){this.setPosition();this.initEvnt();this.lazyImgs()};a.proto.getImgs=function(){var c=document.querySelectorAll("img["+this.selector+"]");return c};a.proto.initEvnt=function(){var c=this;this.container.onscroll=function(d){c.lazyImgs(this)}};a.proto.lazyImg=function(g){var c=g.getAttribute("data-src");var h=this.getImgs();var k=g.getAttribute("load");var j=g.t;var e=this.container.scrollTop;var d=this.container.offsetHeight;var i=g.offsetHeight/2;var k=g.getAttribute("load");if(j-i<d+e){if(k=="false"||k==undefined){var f=new Image();f.index=g.ind;f.src=c;f.onload=function(){var l=h[this.index];var m=l.getAttribute("load");if(m=="false"||m==undefined){l.src=l.getAttribute("data-src");l.setAttribute("load",true);console.log("加载图片"+this.index)}}}}};a.proto.lazyImgs=function(){var e=this.getImgs();for(var d=0;d<e.length;d++){var c=e[d];this.lazyImg(c)}};a.proto.setPosition=function(){var e=this.getImgs();for(var d=0;d<e.length;d++){var c=e[d];c.t=c.clientHeight+c.offsetTop;c.ind=d;c.src=b}};window.LazyImg=a})();